<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.project">
    <insert id="write" parameterType="com.example.demo.domain.ProjectVO">
        insert into tbl_project 
        (prj_no,
         prj_title, 
         start_d8, 
         end_d8, 
         prj_writer, 
         prj_mod_writer, 
         prj_write_d8, 
         prj_mod_d8, 
         prj_content, 
         prj_remark, 
         cond, 
         rmv_yn)
        values (
            tbl_project_seq.nextval,
            #{prj_title},
            #{start_d8},
            #{end_d8},
            #{prj_writer},
            #{prj_mod_writer},
            sysdate,
            sysdate,
            #{prj_content},
            #{prj_remark},
            #{cond},
            'N')
        <selectKey keyProperty="prj_no" resultType="Integer" order="AFTER"> SELECT tbl_project_seq.currval FROM dual </selectKey>
    </insert>
    <select id="getProjectList" resultType="com.example.demo.domain.ProjectVO">
        select * from tbl_project where (cond = '예정' or cond = '진행중') and rmv_YN = 'N'
    </select>
    <select id="getDoneProjectList" resultType="com.example.demo.domain.ProjectVO">
        select * from tbl_project where cond = '완료' and rmv_YN = 'N'
    </select>
    <update id="deleteProject" parameterType="Integer">
        update tbl_project set rmv_YN = 'Y' where prj_no = #{prj_no}
    </update>
</mapper>